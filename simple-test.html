<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Donation Test</title>
    <style>
        .test-results {
            background: #f0f0f0;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #ccc;
            font-family: monospace;
        }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>Simple Donation Test</h1>
    
    <div id="testResults" class="test-results">
        <h3>Test Results:</h3>
        <div id="results"></div>
    </div>
    
    <!-- Test button -->
    <button onclick="testFunction()">Test Function</button>
    <button onclick="openDonationModal()">Open Donation Modal</button>
    
    <!-- Simple modal -->
    <div id="donationModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border: 2px solid black; z-index: 1000;">
        <h2>Donation Modal</h2>
        <button onclick="closeDonationModal()">Close</button>
    </div>
    
    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = type;
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            results.appendChild(div);
        }
        
        function testFunction() {
            log('Test function called successfully!', 'success');
        }
        
        // Add error handling
        window.addEventListener('error', function(e) {
            log('JavaScript Error: ' + e.message + ' at line ' + e.lineno, 'error');
        });
        
        log('Initial script loaded');
    </script>
    
    <!-- Load main.js -->
    <script src="main.js" 
            onerror="log('Failed to load main.js', 'error')" 
            onload="log('main.js loaded successfully', 'success')"></script>
    
    <script>
        // Check functions after main.js loads
        setTimeout(function() {
            try {
                log('Checking functions after main.js load...');
                log('openDonationModal type: ' + typeof window.openDonationModal);
                log('closeDonationModal type: ' + typeof window.closeDonationModal);
                
                if (typeof window.openDonationModal === 'function') {
                    log('SUCCESS: openDonationModal is available!', 'success');
                } else {
                    log('PROBLEM: openDonationModal is not available', 'error');
                    
                    // Check if other objects exist
                    log('App type: ' + typeof window.App);
                    log('DonationModal type: ' + typeof window.DonationModal);
                    log('Navigation type: ' + typeof window.Navigation);
                }
                
                // Test if modal element exists
                const modal = document.getElementById('donationModal');
                if (modal) {
                    log('Modal element found in DOM', 'success');
                } else {
                    log('Modal element NOT found in DOM', 'error');
                }
                
            } catch (error) {
                log('Error checking functions: ' + error.message, 'error');
            }
        }, 1000);
        
        // Also check immediately
        log('Immediate check - openDonationModal type: ' + typeof window.openDonationModal);
    </script>
</body>
</html>